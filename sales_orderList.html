<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>牙樂多 | 後台系統Template</title>

        <!-- Google Font: Source Sans Pro -->
        <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback"
        />
        <!-- Font Awesome Icons -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
            integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        />
        <!-- Theme style -->
        <link rel="stylesheet" href="css/adminlte.min.css" />
    </head>
    <body class="hold-transition sidebar-mini">
        <!-- 主要開發區塊 -->
        <div class="wrapper">
            <header id="header"></header>
            <!-- Main Sidebar Container 主側邊欄-->
            <aside
                id="sidebar"
                class="main-sidebar sidebar-dark-primary elevation-4"
            ></aside>
            <!-- Content Wrapper. Contains page content 主頁面欄位-->
            <div class="content-wrapper">
                <!-- Content Header (Page header) -->
                <div class="content-header">
                    <div class="container-fluid">
                        <div class="row mb-2">
                            <div class="col-sm-6">
                                <h1 class="m-0">
                                    訂單列表/<span>全部訂單</span>
                                </h1>
                            </div>
                            <!-- /.col -->
                            <div class="col-sm-6">
                                <ol class="breadcrumb float-sm-right">
                                    <li class="breadcrumb-item">
                                        <a href="#">Home</a>
                                    </li>
                                    <li class="breadcrumb-item active">
                                        訂單列表
                                    </li>
                                </ol>
                            </div>
                            <!-- /.col -->
                        </div>
                        <!-- /.row -->
                    </div>
                    <!-- /.container-fluid -->
                </div>
                <!-- /.content-header -->
                <!-- Modal -->
                <div
                    class="modal fade"
                    id="editProduct"
                    tabindex="-1"
                    aria-labelledby="exampleModalLabel"
                    aria-hidden="true"
                >
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">
                                    購買資訊
                                </h5>
                                <button
                                    type="button"
                                    class="close"
                                    data-dismiss="modal"
                                    aria-label="Close"
                                >
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <!-- JavaScript -->
                                <table
                                    id="orderlist"
                                    class="table table-bordered table-hover"
                                >
                                    <thead>
                                        <tr>
                                            <th>商品ID</th>
                                            <th>商品名稱</th>
                                            <th>商品數量</th>
                                            <th>價格</th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                            <div class="modal-footer">
                                <button
                                    type="button"
                                    class="btn btn-secondary"
                                    data-dismiss="modal"
                                >
                                    取消
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Main content -->
                <div class="content">
                    <div class="container-fluid">
                        <div class="row">
                            <!-- left column -->
                            <div class="col-md-12">
                                <!-- general form elements -->
                                <div class="card card-primary">
                                    <div class="card-header">
                                        <h3 class="card-title">訂單搜尋</h3>
                                    </div>
                                    <!-- /.card-header -->
                                    <!-- form start -->

                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label for="ordidInput"
                                                        >訂單編號</label
                                                    >
                                                    <input
                                                        class="form-control"
                                                        id="ordidInput"
                                                        placeholder="請輸入訂單編號"
                                                    />
                                                </div>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label>查詢類別</label>
                                                    <select
                                                        id="category"
                                                        class="form-control"
                                                    >
                                                        <option
                                                            value="查詢全部"
                                                        >
                                                            查詢全部
                                                        </option>
                                                        <option value="待付款">
                                                            待付款
                                                        </option>
                                                        <option value="處理中">
                                                            處理中
                                                        </option>
                                                        <option value="配送中">
                                                            配送中
                                                        </option>
                                                        <option
                                                            value="完成訂單"
                                                        >
                                                            完成訂單
                                                        </option>
                                                        <option
                                                            value="取消訂單"
                                                        >
                                                            取消訂單
                                                        </option>
                                                        <option
                                                            value="退貨/退款"
                                                        >
                                                            退貨/退款
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- /.card-body -->
                                    <div class="card-footer">
                                        <button
                                            class="search btn btn-primary"
                                            data-table="order-table"
                                        >
                                            依訂單編號搜尋
                                        </button>
                                        <button
                                            style="margin-left: 350px"
                                            class="searchStatus btn btn-primary"
                                            data-table="order-table"
                                        >
                                            依類別搜尋
                                        </button>
                                        <button
                                            onclick="reset()"
                                            class="btn btn-default float-right"
                                        >
                                            重置
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- <div class="content">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-header">
                                        <button
                                            type="submit"
                                            class="btn-xs btn-outline-primary"
                                        >
                                            全部訂單
                                        </button>
                                        <button
                                            type="submit"
                                            class="btn-xs btn-outline-primary"
                                        >
                                            待付款
                                        </button>
                                        <button
                                            type="submit"
                                            class="btn-xs btn-outline-primary"
                                        >
                                            處理中
                                        </button>
                                        <button
                                            type="submit"
                                            class="btn-xs btn-outline-primary"
                                        >
                                            配送中
                                        </button>
                                        <button
                                            type="submit"
                                            class="btn-xs btn-outline-primary"
                                        >
                                            完成訂單
                                        </button>
                                        <button
                                            type="submit"
                                            class="btn-xs btn-outline-primary"
                                        >
                                            取消訂單
                                        </button>
                                        <button
                                            type="submit"
                                            class="btn-xs btn-outline-primary"
                                        >
                                            退款/退貨
                                        </button>
                                    </div> -->
                            <!-- /.card-header -->
                            <div class="card-body">
                                <table
                                    id="example2"
                                    class="table table-bordered table-hover"
                                >
                                    <thead>
                                        <tr>
                                            <th>訂單編號</th>
                                            <th>買家ID</th>
                                            <th>付款方式</th>
                                            <th>訂單狀態</th>
                                            <th>地址</th>
                                            <th>收件人</th>

                                            <th>購買日期</th>
                                            <th>聯絡方式</th>
                                            <th>市話</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody class="abc">
                                        <tr>
                                            <td>2209290006</td>
                                            <td>范少勛</td>

                                            <td>線上刷卡</td>
                                            <td>
                                                <select name="" id="order">
                                                    <option value=""></option>
                                                    <option value="">
                                                        待付款
                                                    </option>
                                                    <option value="">
                                                        已付款
                                                    </option>
                                                    <option value="">
                                                        待處理
                                                    </option>
                                                    <option value="">
                                                        處理中
                                                    </option>
                                                    <option value="">
                                                        已出貨
                                                    </option>
                                                    <option value="">
                                                        配送中
                                                    </option>
                                                    <option value="">
                                                        完成訂單
                                                    </option>
                                                    <option value="">
                                                        取消訂單
                                                    </option>
                                                    <option value="">
                                                        退貨
                                                    </option>
                                                    <option value="">
                                                        退款中
                                                    </option>
                                                    <option value="">
                                                        退款成功
                                                    </option>
                                                </select>
                                                <button
                                                    id="btn"
                                                    class="btn-xs btn-light"
                                                >
                                                    鎖定
                                                </button>
                                                <script>
                                                    document.querySelector(
                                                        "#btn"
                                                    ).onclick = () => {
                                                        document.querySelector(
                                                            "#order"
                                                        ).disabled =
                                                            !document.querySelector(
                                                                "#order"
                                                            ).disabled;
                                                    };
                                                </script>
                                            </td>
                                            <td>242新北市新莊區新泰路100號</td>
                                            <td>草蝦</td>

                                            <td>2022-09-29 00:30:00</td>
                                            <td>0919495902</td>
                                            <td>無</td>
                                            <td>
                                                <button
                                                    class="btn-xs btn-light"
                                                    data-toggle="modal"
                                                    data-target="#editProduct"
                                                >
                                                    查看詳情
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <!-- <script>
            const orderData = document.querySelector("#data");
            const selOrder = document.querySelector("#order");
            const yaApi = {
                all: "./productnumber.json",
                no: "",
                yes: "",
            };
            function trTamplate(id, name, quantity) {
                return `<tr>
                    <td>      <select name="1" id="order${id}">
            <option value="0">未審核</option>
            <option value="1">審核中</option>
            <option value="2">已完成</option>
        </select></td>
                    <td>${name}</td>
                    <td>${quantity}</td>
                </tr>`;
            }

            /*
             * init
             */
            function init(MyUrl) {
                // select *

                fetch(MyUrl)
                    .then((res) => res.json())
                    .then((data) => {
                        // 印到頁面
                        // orderData.innerHTML = data
                        //     .map(({ id, name, price }) => {
                        //         return trTamplate(id, name, price);
                        //     })
                        //     .join("");

                        data.forEach((e, i) => {
                            orderData.innerHTML += trTamplate(
                                e.orderlistid,
                                e.proname,
                                e.quantity
                            );

                            const selOrder = document.querySelector(
                                `#order${e.orderlistid}`
                            );
                            selOrder.value = e.orderlistid;

                            selOrder.onchange = () => {
                                alert("我被換了");
                            };
                        });
                    });
            }
            window.addEventListener("load", init(yaApi.all));
        </script> -->
                            </div>
                            <!-- /.card-body -->
                        </div>
                    </div>
                    <!-- /.card -->
                </div>
                <!-- /.row -->
            </div>
            <!-- /.container-fluid -->
        </div>
        <!-- /.content -->

        <!-- ============ Footer段落 ============ -->
        <footer id="footer" class="main-footer"></footer>
        <!-- Control Sidebar -->
        <aside class="control-sidebar control-sidebar-dark">
            <!-- Control sidebar content goes here -->
        </aside>
        <!-- /.control-sidebar -->
        <!-- ============ Footer段落 ============ -->
        <!-- /.content-wrapper -->

        <!-- jQuery -->
        <script src="plugins/jquery/jquery.min.js"></script>
        <!-- Bootstrap 4 -->
        <script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
        <!-- AdminLTE App -->
        <script src="js/adminlte.min.js"></script>
        <script src="js/importHeader.js"></script>
        <!-- DataTables  & Plugins -->
        <script src="plugins/datatables/jquery.dataTables.min.js"></script>
        <script src="plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
        <script src="plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
        <script src="plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
        <script src="plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
        <script src="plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
        <script src="plugins/datatables-buttons/js/buttons.html5.min.js"></script>
        <script src="plugins/datatables-buttons/js/buttons.print.min.js"></script>
        <script src="plugins/datatables-buttons/js/buttons.colVis.min.js"></script>
        <script src="js/sales_orderList.js"></script>
        <script>
            $(document).ready(function () {
                $("#btn").click(function () {
                    //orderid 為 submitExample 的按鈕被點擊時
                    $.ajax({
                        type: "POST", //傳送方式
                        url: "localhost:8080/Proj_Yokult/api/0.01/orderlist/", //傳送目的地
                        dataType: "json", //資料格式
                        data: {
                            //傳送資料
                            orderid: $("#orderid").val(),
                        },
                        success: function (data) {
                            if (data.orderid !== null) {
                                //如果後端回傳 json 資料有 orderid
                                $("#demo")[0].reset();
                                $("#result").html(data.orderid);
                            } else {
                                //否則讀取後端回傳 json 資料 errorMsg 顯示錯誤訊息
                                $("#demo")[0].reset();
                                $("#result").html(
                                    '<font color="#ff0000">' +
                                        data.errorMsg +
                                        "</font>" +
                                        "錯誤!!"
                                );
                            }
                        },
                        error: function (jqXHR) {
                            $("#demo")[0].reset();
                            $("#result").html(
                                '<font color="#ff0000">發生錯誤：' +
                                    jqXHR.status +
                                    "</font>" +
                                    "爆了直接error"
                            );
                        },
                    });
                });
            });
        </script>
        <script>
            $(function () {
                $("#example2").DataTable({
                    paging: true,
                    lengthChange: false,
                    searching: false,
                    ordering: true,
                    info: true,
                    autoWidth: false,
                    responsive: true,
                });
            });

            function getData() {
                let requestOptions = {
                    method: "GET",
                    redirect: "follow",
                };

                let url = new URL(
                    "http://localhost:8080/Proj_Yokult/api/0.01/orderlist/"
                );

                url.searchParams.append("ordId", "2209290006");

                fetch(url, requestOptions)
                    .then((response) => response.text())
                    .then((text) => {
                        const rep = JSON.parse(text);

                        console.log(rep);
                    })
                    .catch((error) => console.log("error", error));
            }
        </script>
    </body>
</html>
